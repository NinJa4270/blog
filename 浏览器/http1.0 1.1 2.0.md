## http


### http/1.0
1.  新增
    1.  响应头与响应体 支持了多文件类型下载
    2.  状态码
    3.  缓存技术
2.  问题
    1.  每次`http`通信都需要建立`TCP`连接
    2.  一个域名绑定一个唯一的IP地址
    3.  不支持动态内容,需要设置完整的数据大小`Content-Length`，服务器根据大小来接收数据。

### http/1.1
1.  新增
    1.  增加持久链接 `keep-alive` (每个域名最多同时维护6个TCP连接)
    2.  HOTS字段 表示当前的域名地址，服务器可以通过这个字段做不同的处理。（虚拟主机：一个物理主机绑定多个虚拟主机，每个虚拟主机都有单独的域名，这些域名公用同一个IP地址）
    3.  动态内容支持：引入 `Chunk transfer`机制，服务器将数据切分成若干个任意大小的数据块，使用零长的块作为数据完成标识。
    4.  引入了`Cookie`机制和安全机制
2.  问题
    1.  队头堵塞问题，需要等待前一个请求返回之后，再进行下一次请求。
    2.  对带宽的利用率不理想。
        1.  `TCP` 慢启动（减少网络拥塞的一种策略）
        2.  同时开启多条`TCP`连接,会竞争固定带宽。
        3.  队头堵塞问题

### http/2
1.  新增
    1.  多路复用
        1.  一个域名只同时使用一个`TCP`长连接传输数据。
        2.  解决队头阻塞问题
        3.  每份数据都有自己的streamID 筛选出相同ID进行拼接成完整的HTTP响应数据。
        4.  浏览器将请求头/行/体，通过二进制分帧处理，将每个带有请求ID编号的帧通过协议栈将帧发送给服务器。
        5.  服务器将接收到的帧合并为一个完整的请求信息。
        6.  服务器将响应头/行/体，分别发送至二进制分帧层。将每个带有请求ID编号的帧通过协议栈将帧发送给浏览器。
        7.  浏览器将接收到的帧合并为一个完整的响应信息。
    2.  可设置请求的优先级
    3.  服务器推送
    4.  头部压缩
2.  问题
    1.  `TCP`队头阻塞 （任意一路数据流出现了丢包，就会阻塞TCP中的所有连接）
    2.  `TCP TLS`握手过程大概需要 3-4`RTT`
    3.  `TCP`协议僵化，无法修改`TCP`协议


### http/3
1.  新增
    1.  放弃`TCP` 使用 基于`UDP`协议的 `QUIC`协议
        1.  实现了类似`TCP`的流量控制，传输可靠性
        2.  集成了 `TLS`加密功能 比早起的 `TLS` 减少了 `RTT` 个数
        3.  实现了多路复用功能 可有多个独立的逻辑数据流
        4.  实现了快速握手功能